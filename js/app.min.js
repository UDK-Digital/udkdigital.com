gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(Flip);const content=document.querySelector("body"),loadingWrap=document.querySelector(".loading-wrap"),loadingItems=loadingWrap.querySelectorAll(".loading__item"),fadeInItems=document.querySelectorAll(".loading__fade");function startLoader(){let e=document.querySelector(".loader__count .count__text"),t=0;!function a(){t<100&&(t=Math.min(t+(Math.floor(10*Math.random())+1),100),e.textContent=t,setTimeout(a,Math.floor(120*Math.random())+25))}()}function hideLoader(){gsap.to(".loader__count",{duration:.8,ease:"power2.in",y:"100%",delay:1.8}),gsap.to(".loader__wrapper",{duration:.8,ease:"power4.in",y:"-100%",delay:2.2}),setTimeout((()=>{document.getElementById("loader").classList.add("loaded")}),3200)}function pageAppearance(){gsap.set(loadingItems,{opacity:0}),gsap.to(loadingItems,{duration:1.1,ease:"power4",startAt:{y:120},y:0,opacity:1,delay:.8,stagger:.08},">-=1.1"),gsap.set(fadeInItems,{opacity:0}),gsap.to(fadeInItems,{duration:.8,ease:"none",opacity:1,delay:3.2})}startLoader(),hideLoader(),pageAppearance();const lenis=new Lenis;lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add((e=>{lenis.raf(1e3*e)})),gsap.ticker.lagSmoothing(0),$(window).on("scroll",(function(){$(window).scrollTop()>10?$(".mxd-header").addClass("is-hidden"):$(".mxd-header").removeClass("is-hidden")})),$((function(){$("img, a").on("dragstart",(function(e){e.preventDefault()})),/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$("html").addClass("touch"):$("html").addClass("no-touch"),/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/Edge\/\d+/.test(navigator.userAgent),$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click((function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);(t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length&&(e.preventDefault(),$("html, body").animate({scrollTop:t.offset().top},1e3,(function(){var e=$(t);if(e.focus(),e.is(":focus"))return!1;e.attr("tabindex","-1"),e.focus()})))}})),$(".mxd-nav__wrap").each((function(){let e=$(this).find(".mxd-nav__hamburger"),t=$(this).find(".hamburger__line"),a=$(this).find(".mxd-menu__contain"),o=$(this).find(".hamburger__base"),n=$(this).find(".mxd-menu__wrapper"),r=$(this).find(".mxd-menu__base"),i=($(this).find(".mxd-menu__link"),$(this).find(".main-menu__item")),l=$(this).find(".menu-promo__video"),s=$(this).find(".menu-fade-in");function c(t){let n=Flip.getState(o);t?o.appendTo(a):o.appendTo(e),Flip.from(n,{ease:"power4.inOut",duration:.8})}let d=gsap.timeline({paused:!0});function m(t){d.isActive()||(t?(d.play(),e.addClass("nav-open")):(d.reverse(),e.removeClass("nav-open")))}d.set(n,{display:"flex"}),d.from(r,{opacity:0,duration:.6,ease:"none",onStart(){c(!0)}}),d.to(t.eq(0),{y:5,duration:.16},"<"),d.to(t.eq(1),{y:-5,duration:.16},"<"),d.to(t.eq(0),{rotate:45,duration:.16},.2),d.to(t.eq(1),{rotate:-45,duration:.16},.2),d.add("fade-in-up").from(i,{opacity:0,yPercent:50,duration:.2,stagger:{amount:.2},onReverseComplete(){c(!1)}},"fade-in-up").from(l,{opacity:0,yPercent:20,duration:.2},"fade-in-up"),d.from(s,{opacity:0,duration:.3}),e.on("click",(function(){event.preventDefault(),$(this).hasClass("nav-open")?m(!1):m(!0)})),r.on("click",(function(){m(!1)})),$(document).on("keydown",(function(e){"Escape"===e.key&&m(!1)})),window.addEventListener("beforeunload",(e=>{m(!1)}))})),$(".mxd-nav__hamburger").on("click",(function(){$(".mxd-nav__hamburger").hasClass("nav-open")?$(".mxd-header").addClass("menu-is-visible"):setTimeout((function(){$(".mxd-header").removeClass("menu-is-visible")}),1100)}));var e=function(e,t){this.el=e||{},this.multiple=t||!1,this.el.find(".main-menu__toggle").on("click",{el:this.el,multiple:this.multiple},this.dropdown)};e.prototype.dropdown=function(e){var t=e.data.el;($next=($this=$(this)).next()).slideToggle(),$this.parent().toggleClass("open"),e.data.multiple||t.find(".submenu").not($next).slideUp().parent().removeClass("open")},new e($("#main-menu"),!1),$(".mxd-projects-masonry__gallery").masonry("layout"),ScrollTrigger.refresh(),$(".mxd-accordion__title").on("click",(function(e){e.preventDefault();var t=$(this);t.hasClass("accordion-active")||($(".mxd-accordion__content").slideUp(400),$(".mxd-accordion__title").removeClass("accordion-active"),$(".mxd-accordion__arrow").removeClass("accordion-rotate")),t.toggleClass("accordion-active"),t.next().slideToggle(),$(".mxd-accordion__arrow",this).toggleClass("accordion-rotate")})),$("#showreel-trigger").magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1,callbacks:{beforeOpen:function(){$("body").addClass("overflow-hidden"),lenis.stop()},close:function(){$("body").removeClass("overflow-hidden"),lenis.start()}}})}));const cards=document.querySelectorAll(".stack-item"),stickySpace=document.querySelector(".stack-offset"),animation=gsap.timeline();let cardHeight;if(document.querySelector(".stack-item")){function t(){animation.clear(),cardHeight=cards[0].offsetHeight,cards.forEach(((e,t)=>{t>0&&(gsap.set(e,{y:t*cardHeight}),animation.to(e,{y:0,duration:.5*t,ease:"none"},0))}))}t(),ScrollTrigger.create({trigger:".stack-wrapper",start:"top top",pin:!0,end:()=>`+=${cards.length*cardHeight+stickySpace.offsetHeight}`,scrub:!0,animation:animation,invalidateOnRefresh:!0}),ScrollTrigger.addEventListener("refreshInit",t)}let elements=document.querySelectorAll(".btn-anim .btn-caption");elements.forEach((e=>{let t=e.innerText;e.innerHTML="";let a=document.createElement("div");for(let e of(a.classList.add("btn-anim__block"),t)){let t=document.createElement("span");t.innerText=""===e.trim()?" ":e,t.classList.add("btn-anim__letter"),a.appendChild(t)}e.appendChild(a),e.appendChild(a.cloneNode(!0))})),elements.forEach((e=>{e.addEventListener("mouseover",(()=>{e.classList.remove("play")}))}));const animateRotation=document.querySelectorAll(".animate-rotation");animateRotation.forEach((e=>{var t=$(e).data("value");gsap.fromTo(e,{ease:"sine",rotate:0},{rotate:t,scrollTrigger:{trigger:e,scrub:!0,toggleActions:"play none none reverse"}})}));const animateInUp=document.querySelectorAll(".anim-uni-in-up");animateInUp.forEach((e=>{gsap.fromTo(e,{opacity:0,y:50,ease:"sine"},{y:0,opacity:1,scrollTrigger:{trigger:e,toggleActions:"play none none reverse"}})}));const animateInUpFront=document.querySelectorAll(".anim-uni-scale-in");animateInUpFront.forEach((e=>{gsap.fromTo(e,{opacity:1,y:50,scale:1.2,ease:"sine"},{y:0,x:0,opacity:1,scale:1,scrollTrigger:{trigger:e,toggleActions:"play none none reverse"}})}));const animateInUpRight=document.querySelectorAll(".anim-uni-scale-in-right");animateInUpRight.forEach((e=>{gsap.fromTo(e,{opacity:1,y:50,x:-70,scale:1.2,ease:"sine",duration:5},{y:0,x:0,opacity:1,scale:1,scrollTrigger:{trigger:e,toggleActions:"play none none reverse"}})}));const animateInUpLeft=document.querySelectorAll(".anim-uni-scale-in-left");animateInUpLeft.forEach((e=>{gsap.fromTo(e,{opacity:1,y:50,x:70,scale:1.2,ease:"sine"},{y:0,x:0,opacity:1,scale:1,scrollTrigger:{trigger:e,toggleActions:"play none none reverse"}})})),document.querySelector(".animate-card-2")&&(gsap.set(".animate-card-2",{y:50,opacity:0}),ScrollTrigger.batch(".animate-card-2",{interval:.1,batchMax:2,duration:3,onEnter:e=>gsap.to(e,{opacity:1,y:0,ease:"sine",stagger:{each:.15,grid:[1,2]},overwrite:!0}),onLeave:e=>gsap.set(e,{opacity:1,y:0,overwrite:!0}),onEnterBack:e=>gsap.to(e,{opacity:1,y:0,stagger:.15,overwrite:!0}),onLeaveBack:e=>gsap.set(e,{opacity:0,y:50,overwrite:!0})}));const docStyle=getComputedStyle(document.documentElement),zoomInContainer=document.querySelectorAll(".anim-zoom-in-container"),zoomOutContainer=document.querySelectorAll(".anim-zoom-out-container");zoomInContainer.forEach((e=>{gsap.timeline({scrollTrigger:{trigger:e,start:"top 82%",end:"top 14%",scrub:{scrub:!0,ease:"power4.inOut"}}}).fromTo(e,{borderRadius:"200px",transform:"scale3d(0.94, 1, 1)"},{borderRadius:docStyle.getPropertyValue("--_radius-l"),transform:"scale3d(1, 1, 1)"})})),zoomOutContainer.forEach((e=>{gsap.timeline({scrollTrigger:{trigger:e,start:"top 82%",end:"top 14%",scrub:{scrub:!0,ease:"power4.inOut"}}}).fromTo(e,{borderRadius:"200px",transform:"scale3d(1.14, 1, 1)"},{borderRadius:docStyle.getPropertyValue("--_radius-l"),transform:"scale3d(1, 1, 1)"})}));const link=document.querySelectorAll(".hover-reveal__item"),linkHoverReveal=document.querySelectorAll(".hover-reveal__content"),linkImages=document.querySelectorAll(".hover-reveal__image");for(let e=0;e<link.length;e++)link[e].addEventListener("mousemove",(t=>{linkHoverReveal[e].style.opacity=1,linkHoverReveal[e].style.transform="translate(-80%, -50% )",linkImages[e].style.transform="scale(1, 1)",linkHoverReveal[e].style.left=t.clientX+"px"})),link[e].addEventListener("mouseleave",(t=>{linkHoverReveal[e].style.opacity=0,linkHoverReveal[e].style.transform="translate(-80%, -50%)",linkImages[e].style.transform="scale(1, 1.4)"}));const optionsNormal={enableScrollSpy:!0},optionsDecimal={decimalPlaces:1,enableScrollSpy:!0},optionsDecimalTwo={decimalPlaces:2,enableScrollSpy:!0},optionsPercent={suffix:"%",enableScrollSpy:!0},optionsK={suffix:"K",enableScrollSpy:!0},optionsPlus={suffix:"+",enableScrollSpy:!0},initMarquees=()=>{let e=[...document.querySelectorAll(".marquee--gsap")];if(e){let t={top:{el:null,width:0},bottom:{el:null,width:0}};e.forEach((e=>{t.top.el=e.querySelector(".marquee__top"),t.bottom.el=e.querySelector(".marquee__bottom"),t.top.width=t.top.el.offsetWidth,t.bottom.width=t.bottom.el.offsetWidth,t.top.el.innerHTML+=t.top.el.innerHTML,t.bottom.el.innerHTML+=t.bottom.el.innerHTML;let a=gsap.timeline().add(marquee(t.top.el,30,"-=50%"),0).add(marquee(t.bottom.el,30,"+=50%"),0),o=gsap.to(a,{duration:1.5,timeScale:1,paused:!0}),n=gsap.utils.clamp(1,6);ScrollTrigger.create({start:0,end:"max",onUpdate(e){a.timeScale(n(Math.abs(e.getVelocity()/200))),o.invalidate().restart()}})}))}},marquee=(e,t,a)=>{let o=gsap.utils.wrap(0,50);return gsap.to(e,{duration:t,ease:"none",x:a,modifiers:{x:e=>a=o(parseFloat(e))+"%"},repeat:-1})};initMarquees();const initMarquee=()=>{let e=[...document.querySelectorAll(".marquee-right--gsap")];if(e){let t={el:null,width:0};e.forEach((e=>{t.el=e.querySelector(".marquee__toright"),t.width=t.el.offsetWidth,t.el.innerHTML+=t.el.innerHTML;let a=gsap.timeline().add(marqueeRight(t.el,30,"+=50%"),0),o=gsap.to(a,{duration:1.5,timeScale:1,paused:!0}),n=gsap.utils.clamp(1,6);ScrollTrigger.create({start:0,end:"max",onUpdate(e){a.timeScale(n(Math.abs(e.getVelocity()/200))),o.invalidate().restart()}})}))}},marqueeRight=(e,t,a)=>{let o=gsap.utils.wrap(0,50);return gsap.to(e,{duration:t,ease:"none",x:a,modifiers:{x:e=>a=o(parseFloat(e))+"%"},repeat:-1})};initMarquee(),marqueeLeft=(e,t,a)=>{let o=gsap.utils.wrap(0,50);return gsap.to(e,{duration:t,ease:"none",x:a,modifiers:{x:e=>a=o(parseFloat(e))+"%"},repeat:-1})};