gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(Flip);const content=document.querySelector("body"),loadingWrap=document.querySelector(".loading-wrap"),loadingItems=loadingWrap.querySelectorAll(".loading__item"),fadeInItems=document.querySelectorAll(".loading__fade");function startLoader(){let t=document.querySelector(".loader__count .count__text"),a=0;!function o(){a<100&&(a=Math.min(a+(Math.floor(10*Math.random())+1),100),t.textContent=a,setTimeout(o,Math.floor(120*Math.random())+25))}()}function hideLoader(){gsap.to(".loader__count",{duration:.8,ease:"power2.in",y:"100%",delay:1.8}),gsap.to(".loader__wrapper",{duration:.8,ease:"power4.in",y:"-100%",delay:2.2}),setTimeout(()=>{document.getElementById("loader").classList.add("loaded")},3200)}function pageAppearance(){gsap.set(loadingItems,{opacity:0}),gsap.to(loadingItems,{duration:1.1,ease:"power4",startAt:{y:120},y:0,opacity:1,delay:.8,stagger:.08},">-=1.1"),gsap.set(fadeInItems,{opacity:0}),gsap.to(fadeInItems,{duration:.8,ease:"none",opacity:1,delay:3.2})}startLoader(),hideLoader(),pageAppearance();const lenis=new Lenis;lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{lenis.raf(1e3*t)}),gsap.ticker.lagSmoothing(0),$(window).on("load",function(){"use strict";$(".animated-type").length&&new Typed("#typed",{stringsElement:"#typed-strings",showCursor:!0,cursorChar:"_",loop:!0,typeSpeed:70,backSpeed:30,backDelay:2500})}),$(window).on("scroll",function(){$(window).scrollTop()>10?$(".mxd-header").addClass("is-hidden"):$(".mxd-header").removeClass("is-hidden")}),$(function(){Modernizr.svg||$("img[src*='svg']").attr("src",function(){return $(this).attr("src").replace(".svg",".png")});try{$.browserSelector(),$("html").hasClass("chrome")&&$.smoothScroll()}catch(t){}$("img, a").on("dragstart",function(t){t.preventDefault()}),/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$("html").addClass("touch"):$("html").addClass("no-touch"),/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/Edge\/\d+/.test(navigator.userAgent),$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(t){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);(a=a.length?a:$("[name="+this.hash.slice(1)+"]")).length&&(t.preventDefault(),$("html, body").animate({scrollTop:a.offset().top},1e3,function(){var t=$(a);if(t.focus(),t.is(":focus"))return!1;t.attr("tabindex","-1"),t.focus()}))}}),$(".mxd-nav__wrap").each(function(){let t=$(this).find(".mxd-nav__hamburger"),a=$(this).find(".hamburger__line"),o=$(this).find(".mxd-menu__contain"),n=$(this).find(".hamburger__base"),r=$(this).find(".mxd-menu__wrapper"),i=$(this).find(".mxd-menu__base"),l=($(this).find(".mxd-menu__link"),$(this).find(".main-menu__item")),s=$(this).find(".menu-promo__video"),c=$(this).find(".menu-fade-in");function d(a){let r=Flip.getState(n);a?n.appendTo(o):n.appendTo(t),Flip.from(r,{ease:"power4.inOut",duration:.8})}let m=gsap.timeline({paused:!0});function u(a){m.isActive()||(a?(m.play(),t.addClass("nav-open")):(m.reverse(),t.removeClass("nav-open")))}m.set(r,{display:"flex"}),m.from(i,{opacity:0,duration:.6,ease:"none",onStart(){d(!0)}}),m.to(a.eq(0),{y:5,duration:.16},"<"),m.to(a.eq(1),{y:-5,duration:.16},"<"),m.to(a.eq(0),{rotate:45,duration:.16},.2),m.to(a.eq(1),{rotate:-45,duration:.16},.2),m.add("fade-in-up").from(l,{opacity:0,yPercent:50,duration:.2,stagger:{amount:.2},onReverseComplete(){d(!1)}},"fade-in-up").from(s,{opacity:0,yPercent:20,duration:.2},"fade-in-up"),m.from(c,{opacity:0,duration:.3}),t.on("click",function(){event.preventDefault(),$(this).hasClass("nav-open")?u(!1):u(!0)}),i.on("click",function(){u(!1)}),$(document).on("keydown",function(t){"Escape"===t.key&&u(!1)}),window.addEventListener("beforeunload",t=>{u(!1)})}),$(".mxd-nav__hamburger").on("click",function(){$(".mxd-nav__hamburger").hasClass("nav-open")?$(".mxd-header").addClass("menu-is-visible"):setTimeout(function(){$(".mxd-header").removeClass("menu-is-visible")},1100)});var a=function(t,a){this.el=t||{},this.multiple=a||!1,this.el.find(".main-menu__toggle").on("click",{el:this.el,multiple:this.multiple},this.dropdown)};a.prototype.dropdown=function(t){var a=t.data.el;($next=($this=$(this)).next()).slideToggle(),$this.parent().toggleClass("open"),t.data.multiple||a.find(".submenu").not($next).slideUp().parent().removeClass("open")},new a($("#main-menu"),!1),$(".mxd-projects-masonry__gallery").masonry("layout"),ScrollTrigger.refresh(),$(".mxd-accordion__title").on("click",function(t){t.preventDefault();var a=$(this);a.hasClass("accordion-active")||($(".mxd-accordion__content").slideUp(400),$(".mxd-accordion__title").removeClass("accordion-active"),$(".mxd-accordion__arrow").removeClass("accordion-rotate")),a.toggleClass("accordion-active"),a.next().slideToggle(),$(".mxd-accordion__arrow",this).toggleClass("accordion-rotate")}),$("#showreel-trigger").magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1,callbacks:{beforeOpen:function(){$("body").addClass("overflow-hidden"),lenis.stop()},close:function(){$("body").removeClass("overflow-hidden"),lenis.start()}}})});const cards=document.querySelectorAll(".stack-item"),stickySpace=document.querySelector(".stack-offset"),animation=gsap.timeline();let cardHeight;if(document.querySelector(".stack-item")){function t(){animation.clear(),cardHeight=cards[0].offsetHeight,cards.forEach((t,a)=>{a>0&&(gsap.set(t,{y:a*cardHeight}),animation.to(t,{y:0,duration:.5*a,ease:"none"},0))})}t(),ScrollTrigger.create({trigger:".stack-wrapper",start:"top top",pin:!0,end:()=>`+=${cards.length*cardHeight+stickySpace.offsetHeight}`,scrub:!0,animation:animation,invalidateOnRefresh:!0}),ScrollTrigger.addEventListener("refreshInit",t)}let elements=document.querySelectorAll(".btn-anim .btn-caption");elements.forEach(t=>{let a=t.innerText;t.innerHTML="";let o=document.createElement("div");for(let n of(o.classList.add("btn-anim__block"),a)){let r=document.createElement("span");r.innerText=""===n.trim()?"\xa0":n,r.classList.add("btn-anim__letter"),o.appendChild(r)}t.appendChild(o),t.appendChild(o.cloneNode(!0))}),elements.forEach(t=>{t.addEventListener("mouseover",()=>{t.classList.remove("play")})});const animateRotation=document.querySelectorAll(".animate-rotation");animateRotation.forEach(t=>{var a=$(t).data("value");gsap.fromTo(t,{ease:"sine",rotate:0},{rotate:a,scrollTrigger:{trigger:t,scrub:!0,toggleActions:"play none none reverse"}})});const animateInUp=document.querySelectorAll(".anim-uni-in-up");animateInUp.forEach(t=>{gsap.fromTo(t,{opacity:0,y:50,ease:"sine"},{y:0,opacity:1,scrollTrigger:{trigger:t,toggleActions:"play none none reverse"}})});const animateInUpFront=document.querySelectorAll(".anim-uni-scale-in");animateInUpFront.forEach(t=>{gsap.fromTo(t,{opacity:1,y:50,scale:1.2,ease:"sine"},{y:0,x:0,opacity:1,scale:1,scrollTrigger:{trigger:t,toggleActions:"play none none reverse"}})});const animateInUpRight=document.querySelectorAll(".anim-uni-scale-in-right");animateInUpRight.forEach(t=>{gsap.fromTo(t,{opacity:1,y:50,x:-70,scale:1.2,ease:"sine",duration:5},{y:0,x:0,opacity:1,scale:1,scrollTrigger:{trigger:t,toggleActions:"play none none reverse"}})});const animateInUpLeft=document.querySelectorAll(".anim-uni-scale-in-left");animateInUpLeft.forEach(t=>{gsap.fromTo(t,{opacity:1,y:50,x:70,scale:1.2,ease:"sine"},{y:0,x:0,opacity:1,scale:1,scrollTrigger:{trigger:t,toggleActions:"play none none reverse"}})}),document.querySelector(".animate-card-2")&&(gsap.set(".animate-card-2",{y:50,opacity:0}),ScrollTrigger.batch(".animate-card-2",{interval:.1,batchMax:2,duration:3,onEnter:t=>gsap.to(t,{opacity:1,y:0,ease:"sine",stagger:{each:.15,grid:[1,2]},overwrite:!0}),onLeave:t=>gsap.set(t,{opacity:1,y:0,overwrite:!0}),onEnterBack:t=>gsap.to(t,{opacity:1,y:0,stagger:.15,overwrite:!0}),onLeaveBack:t=>gsap.set(t,{opacity:0,y:50,overwrite:!0})}));const docStyle=getComputedStyle(document.documentElement),zoomInContainer=document.querySelectorAll(".anim-zoom-in-container"),zoomOutContainer=document.querySelectorAll(".anim-zoom-out-container");zoomInContainer.forEach(t=>{gsap.timeline({scrollTrigger:{trigger:t,start:"top 82%",end:"top 14%",scrub:{scrub:!0,ease:"power4.inOut"}}}).fromTo(t,{borderRadius:"200px",transform:"scale3d(0.94, 1, 1)"},{borderRadius:docStyle.getPropertyValue("--_radius-l"),transform:"scale3d(1, 1, 1)"})}),zoomOutContainer.forEach(t=>{gsap.timeline({scrollTrigger:{trigger:t,start:"top 82%",end:"top 14%",scrub:{scrub:!0,ease:"power4.inOut"}}}).fromTo(t,{borderRadius:"200px",transform:"scale3d(1.14, 1, 1)"},{borderRadius:docStyle.getPropertyValue("--_radius-l"),transform:"scale3d(1, 1, 1)"})});const link=document.querySelectorAll(".hover-reveal__item"),linkHoverReveal=document.querySelectorAll(".hover-reveal__content"),linkImages=document.querySelectorAll(".hover-reveal__image");for(let e=0;e<link.length;e++)link[e].addEventListener("mousemove",t=>{linkHoverReveal[e].style.opacity=1,linkHoverReveal[e].style.transform="translate(-80%, -50% )",linkImages[e].style.transform="scale(1, 1)",linkHoverReveal[e].style.left=t.clientX+"px"}),link[e].addEventListener("mouseleave",t=>{linkHoverReveal[e].style.opacity=0,linkHoverReveal[e].style.transform="translate(-80%, -50%)",linkImages[e].style.transform="scale(1, 1.4)"});const optionsNormal={enableScrollSpy:!0},optionsDecimal={decimalPlaces:1,enableScrollSpy:!0},optionsDecimalTwo={decimalPlaces:2,enableScrollSpy:!0},optionsPercent={suffix:"%",enableScrollSpy:!0},optionsK={suffix:"K",enableScrollSpy:!0},optionsPlus={suffix:"+",enableScrollSpy:!0},initMarquees=()=>{let t=[...document.querySelectorAll(".marquee--gsap")];if(t){let a={top:{el:null,width:0},bottom:{el:null,width:0}};t.forEach(t=>{a.top.el=t.querySelector(".marquee__top"),a.bottom.el=t.querySelector(".marquee__bottom"),a.top.width=a.top.el.offsetWidth,a.bottom.width=a.bottom.el.offsetWidth,a.top.el.innerHTML+=a.top.el.innerHTML,a.bottom.el.innerHTML+=a.bottom.el.innerHTML;let o=gsap.timeline().add(marquee(a.top.el,30,"-=50%"),0).add(marquee(a.bottom.el,30,"+=50%"),0),n=gsap.to(o,{duration:1.5,timeScale:1,paused:!0}),r=gsap.utils.clamp(1,6);ScrollTrigger.create({start:0,end:"max",onUpdate(t){o.timeScale(r(Math.abs(t.getVelocity()/200))),n.invalidate().restart()}})})}},marquee=(t,a,o)=>{let n=gsap.utils.wrap(0,50);return gsap.to(t,{duration:a,ease:"none",x:o,modifiers:{x:t=>o=n(parseFloat(t))+"%"},repeat:-1})};initMarquees();const initMarquee=()=>{let t=[...document.querySelectorAll(".marquee-right--gsap")];if(t){let a={el:null,width:0};t.forEach(t=>{a.el=t.querySelector(".marquee__toright"),a.width=a.el.offsetWidth,a.el.innerHTML+=a.el.innerHTML;let o=gsap.timeline().add(marqueeRight(a.el,30,"+=50%"),0),n=gsap.to(o,{duration:1.5,timeScale:1,paused:!0}),r=gsap.utils.clamp(1,6);ScrollTrigger.create({start:0,end:"max",onUpdate(t){o.timeScale(r(Math.abs(t.getVelocity()/200))),n.invalidate().restart()}})})}},marqueeRight=(t,a,o)=>{let n=gsap.utils.wrap(0,50);return gsap.to(t,{duration:a,ease:"none",x:o,modifiers:{x:t=>o=n(parseFloat(t))+"%"},repeat:-1})};initMarquee(),marqueeLeft=(t,a,o)=>{let n=gsap.utils.wrap(0,50);return gsap.to(t,{duration:a,ease:"none",x:o,modifiers:{x:t=>o=n(parseFloat(t))+"%"},repeat:-1})};